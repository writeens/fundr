(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports=a(49)},26:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(18),c=a.n(r),s=(a(26),a(3)),o=a(4),l=a(7),u=a(5),d=a(1),m=a(6),h=a(8),f=a.n(h),b=a(19),p=(a(44),f.a.create({baseURL:"https://api.paystack.co",headers:{Authorization:"Bearer ".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).SECRET_API)}})),v=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={accountNo:"",banks:[],bankCode:"",amount:"",accountName:"",reason:"",isVerifying:!1},a.handleAccount=a.handleAccount.bind(Object(d.a)(a)),a.handleSelect=a.handleSelect.bind(Object(d.a)(a)),a.handleAmount=a.handleAmount.bind(Object(d.a)(a)),a.handleReason=a.handleReason.bind(Object(d.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;p.get("/bank").then(function(t){if(e.setState({isLoading:!0}),200===t.status){var a=t.data.data.map(function(e){return{code:e.code,name:e.name,id:e.id,type:e.type}});e.setState({banks:a})}})}},{key:"handleSelect",value:function(e){this.setState({bankCode:e.target.value,accountNo:"",accountName:""})}},{key:"handleAmount",value:function(e){this.setState({amount:e.target.value})}},{key:"handleReason",value:function(e){this.setState({reason:e.target.value})}},{key:"handleAccount",value:function(e){var t=this;this.setState(Object(b.a)({},e.target.name,e.target.value),function(){10===t.state.accountNo.length&&t.setState({isVerifying:!0},function(){p.get("/bank/resolve",{params:{account_number:t.state.accountNo,bank_code:t.state.bankCode}}).then(function(e){var a=e.data.data.account_name;t.setState({isVerifying:!1},function(){t.setState({accountName:a})})}).catch(function(e){e&&(alert("Please ensure you are transferring to the proper bank"),t.setState({bankCode:"",accountNo:"",isVerifying:!1}))})})})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state,a=t.bankCode,n=t.accountName,i=t.accountNo,r=t.amount,c=t.reason;this.props.createRecipient(a,n,i,r,c)}},{key:"clear",value:function(){this.setState({accountNo:"",bankCode:"",amount:"",accountName:"",reason:"",isVerifying:!1})}},{key:"render",value:function(){return i.a.createElement("form",{onSubmit:this.handleSubmit,className:"TransferForm"},i.a.createElement("div",null,i.a.createElement("label",{htmlFor:"bankInfo"},"Bank: "),i.a.createElement("select",{value:this.state.bankCode,onChange:this.handleSelect},i.a.createElement("option",{disabled:!0,value:""},"Select a Bank"),this.state.banks.map(function(e){return i.a.createElement("option",{key:e.id,value:e.code},e.name)}))),i.a.createElement("div",null,i.a.createElement("label",{htmlFor:"accountNo"},"Account No: "),i.a.createElement("input",{type:"text",name:"accountNo",id:"accountNo",value:this.state.success?"":this.state.accountNo,onChange:this.handleAccount,required:!0,maxLength:10})),i.a.createElement("div",null,i.a.createElement("label",{htmlFor:"accountName"},"Account Name: "),i.a.createElement("input",{type:"text",id:"accountName",name:"accountName",defaultValue:this.state.accountName,disabled:!0}),this.state.isVerifying?i.a.createElement("div",{className:"TransferForm-ac-loader"},i.a.createElement("i",{className:"fas fa-spinner fa-spin"})):null),i.a.createElement("div",null,i.a.createElement("label",{htmlFor:"amount"},"Amount: "),i.a.createElement("input",{type:"text",name:"amount",id:"amount",value:this.state.amount,onChange:this.handleAmount,required:!0})),i.a.createElement("div",null,i.a.createElement("label",{htmlFor:"reason"},"Description"),i.a.createElement("input",{type:"text",id:"reason",name:"reason",value:this.state.reason,onChange:this.handleReason,required:!0,maxLength:30})),i.a.createElement("div",{id:"TransferForm-button"},i.a.createElement("button",null,"Continue")))}}]),t}(n.Component),E=(a(45),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={otp:""},a.handleChange=a.handleChange.bind(Object(d.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(d.a)(a)),a.handleClose=a.handleClose.bind(Object(d.a)(a)),a.handleClear=a.handleClear.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){this.setState({otp:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.finalizeTransfer(this.state.otp)}},{key:"handleClose",value:function(){this.props.closeModal()}},{key:"handleClear",value:function(){this.props.clear()}},{key:"render",value:function(){return i.a.createElement("div",{className:"wrapper"},this.props.success?i.a.createElement("div",{className:"Modal"},i.a.createElement("div",{className:"Modal-success"},"Success"),i.a.createElement("div",{className:"Modal-success-details"},i.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"40",height:"50",viewBox:"0 0 80 80"},i.a.createElement("title",null,"tick-mark"),i.a.createElement("path",{className:"path-circle",stroke:"#0c243b",strokeWidth:"3",fill:"none",strokeLinecap:"butt",strokeLinejoin:"butt",d:"M 75,40 A 35,35   0 0 1 40,75  M40,75 A 35,35   0 0 1 5,40  M5,40 A 35,35   0 0 1 40,5  M40,5 A 35,35   0 0 1 75,40"}),i.a.createElement("path",{className:"path-tick",stroke:"#0c243b",strokeWidth:"3",fill:"none",strokeLinecap:"butt",strokeLinejoin:"butt",d:"M 25,45 35,55 60,30"})),i.a.createElement("button",{className:"Modal-cancel",onClick:this.handleClear},"Close"))):i.a.createElement("div",{className:"Modal"},i.a.createElement("div",{className:"Modal-text"},"You are about to transfer\n                        NGN ".concat(this.props.amount,"\n                        from Fundr\n                        to ").concat(this.props.recipient.name,"\n                        of ").concat(this.props.recipient.bank)),i.a.createElement("form",{className:"Modal-form"},i.a.createElement("label",{htmlFor:"otp"},"Enter OTP"),i.a.createElement("input",{type:"text",id:"otp",name:"otp",value:this.state.otp,placeholder:"Enter OTP",onChange:this.handleChange,required:!0}),i.a.createElement("div",{className:"Modal-buttons"},i.a.createElement("button",{id:"Modal-cancel",onClick:this.handleClose},"Cancel"),i.a.createElement("button",{onClick:this.handleSubmit},"Done")))))}}]),t}(n.Component)),k=(a(46),f.a.create({baseURL:"https://api.paystack.co",headers:{Authorization:"Bearer ".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).SECRET_API)}})),N=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={recipients:[],recipient:{},recipientCode:"",amount:"",reason:"",defaultSelect:"Select a Recipient"},a.handleSelect=a.handleSelect.bind(Object(d.a)(a)),a.handleAmount=a.handleAmount.bind(Object(d.a)(a)),a.handleReason=a.handleReason.bind(Object(d.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;k.get("/transferrecipient").then(function(t){var a=t.data.data;e.setState({recipients:a})})}},{key:"handleSelect",value:function(e){var t=this;this.setState({recipientCode:e.target.value},function(){if(t.state.recipientCode){var e=t.state.recipients.filter(function(e){return e.recipient_code===t.state.recipientCode})[0];t.setState(function(t){return{recipient:{recipientCode:e.recipient_code,name:e.name,bank:e.details.bank_name,bank_code:e.details.bank_code,accountNumber:e.details.account_number}}})}})}},{key:"handleAmount",value:function(e){this.setState({amount:e.target.value})}},{key:"handleReason",value:function(e){this.setState({reason:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.update(this.state.amount,this.state.recipient,this.state.reason)}},{key:"render",value:function(){return i.a.createElement("form",{onSubmit:this.handleSubmit,className:"DirectForm"},i.a.createElement("div",null,i.a.createElement("label",{htmlFor:"Recipient"},"Transfer To"),i.a.createElement("select",{value:this.state.recipientCode,onChange:this.handleSelect},i.a.createElement("option",{disabled:!0,value:""},"Select a Recipient"),this.state.recipients.map(function(e){return i.a.createElement("option",{key:e.id,value:e.recipient_code},e.name)}))),i.a.createElement("div",null,i.a.createElement("label",{htmlFor:"accountNo"},"Account No"),i.a.createElement("input",{type:"text",name:"accountNo",id:"accountNo",defaultValue:this.state.recipient.accountNumber,disabled:!0,required:!0})),i.a.createElement("div",null,i.a.createElement("label",{htmlFor:"bank"},"Bank"),i.a.createElement("input",{type:"text",name:"bank",id:"bank",defaultValue:this.state.recipient.bank,disabled:!0,required:!0})),i.a.createElement("div",null,i.a.createElement("label",{htmlFor:"amount"},"Amount"),i.a.createElement("input",{type:"text",name:"amount",id:"amount",value:this.state.amount,onChange:this.handleAmount,required:!0})),i.a.createElement("div",null,i.a.createElement("label",{htmlFor:"reason"},"Description"),i.a.createElement("input",{type:"text",id:"reason",name:"reason",value:this.state.reason,onChange:this.handleReason,required:!0,maxLength:30})),i.a.createElement("div",{id:"DirectForm-button"},i.a.createElement("button",null,"Continue")))}}]),t}(n.Component),C=(a(47),f.a.create({baseURL:"https://api.paystack.co",headers:{Authorization:"Bearer ".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).SECRET_API)}})),y=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={amount:"",recipient:{},directTransfer:!0,isTransferring:!1,transferCode:"",success:!1},a.createRecipient=a.createRecipient.bind(Object(d.a)(a)),a.initiateTransfer=a.initiateTransfer.bind(Object(d.a)(a)),a.handleDirectTransfer=a.handleDirectTransfer.bind(Object(d.a)(a)),a.handleNewTransfer=a.handleNewTransfer.bind(Object(d.a)(a)),a.finalizeTransfer=a.finalizeTransfer.bind(Object(d.a)(a)),a.closeModal=a.closeModal.bind(Object(d.a)(a)),a.updateFundr=a.updateFundr.bind(Object(d.a)(a)),a.clear=a.clear.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"createRecipient",value:function(e,t,a,n,i){var r=this;C.post("/transferrecipient",{type:a,name:t,account_number:a,bank_code:e}).then(function(e){if(200===e.status||201===e.status){var t=e.data.data;r.setState({recipient:{recipientCode:t.recipient_code,name:t.name,bank:t.details.bank_name,bank_code:t.details.bank_code},amount:n},r.initiateTransfer(n,i,t.recipient_code))}}).catch(function(e){alert(e)})}},{key:"updateFundr",value:function(e,t,a){this.setState({amount:e,reason:a,recipient:t},this.initiateTransfer(e,a,t.recipientCode))}},{key:"initiateTransfer",value:function(e,t,a){var n=this;C.post("/transfer",{source:"balance",amount:100*e,reason:t,recipient:a}).then(function(e){var t=e.data.data.transfer_code;n.setState(function(e){return{isTransferring:!0,transferCode:t}})})}},{key:"finalizeTransfer",value:function(e){var t=this;C.post("/transfer/finalize_transfer",{transfer_code:this.state.transferCode,otp:e}).then(function(e){200===e.status&&t.setState({success:!0},function(){t.setState({amount:"",recipient:"",transferCode:""})})}).catch(function(e){alert(e),t.closeModal()})}},{key:"clear",value:function(){this.state.directTransfer?this.handleDirectTransfer():this.handleNewTransfer()}},{key:"handleDirectTransfer",value:function(){this.setState({directTransfer:!0,amount:"",recipient:"",isTransferring:!1,transferCode:"",success:!1})}},{key:"handleNewTransfer",value:function(){this.setState({directTransfer:!1,amount:"",recipient:"",isTransferring:!1,transferCode:"",success:!1})}},{key:"closeModal",value:function(){this.setState({isTransferring:!1})}},{key:"render",value:function(){return i.a.createElement("div",{className:"Fundr"},i.a.createElement("div",{className:"Fundr-sidebar"},i.a.createElement("i",{className:"fas fa-infinity"}),i.a.createElement("h1",{className:"Fundr-sidebar-title"},"Fund",i.a.createElement("span",null,"r"))),i.a.createElement("div",{className:"Fundr-main"},i.a.createElement("div",{className:"Fundr-main-switch"},i.a.createElement("button",{style:this.state.directTransfer?{backgroundColor:"#0c243b",color:"white"}:null,onClick:this.handleDirectTransfer},"Direct"),i.a.createElement("button",{style:this.state.directTransfer?null:{backgroundColor:"#0c243b",color:"white"},onClick:this.handleNewTransfer},"New Transfer")),i.a.createElement("div",null,this.state.directTransfer?i.a.createElement(N,{update:this.updateFundr,initiateTransfer:this.initiateTransfer}):i.a.createElement(v,{createRecipient:this.createRecipient})),this.state.isTransferring?i.a.createElement(E,{amount:this.state.amount,recipient:this.state.recipient,closeModal:this.closeModal,clear:this.clear,finalizeTransfer:this.finalizeTransfer,success:this.state.success}):null))}}]),t}(n.Component);a(48);var S=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(y,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[20,1,2]]]);
//# sourceMappingURL=main.b8344f45.chunk.js.map